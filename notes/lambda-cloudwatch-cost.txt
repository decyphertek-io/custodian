# Costs of Utilizing CloudWatch and Lambda for Auto-Remediation
AWS Lambda Costs

Free Tier: 1 million free requests per month and 400,000 GB-seconds of compute time per month.
Beyond Free Tier:
$0.20 per 1 million requests
$0.00001667 per GB-second (for memory allocated and execution time)
AWS CloudWatch Costs

Logs:

First 5 GB of log data ingestion per month is free
$0.50 per GB ingested beyond the free tier
$0.03 per GB archived per month
Metrics:

$0.30 per metric per month (standard resolution)
$0.01 per 1,000 standard resolution metrics
Estimating Costs

Lambda Function Execution:

Assume each control runs 10 times a day.
100 controls x 10 executions/day x 30 days = 30,000 executions/month.
30,000 executions are within the 1 million free tier limit.
If each execution takes 1 second with 128MB of memory: 30,000 seconds * 128/1024 GB = 3,750 GB-seconds.
This is also within the 400,000 GB-seconds free tier limit.
CloudWatch Logs:

Assuming each execution logs 1KB of data.
30,000 executions * 1KB = 30 MB of logs.
30 MB is well within the 5 GB free tier limit.
Summary
For up to 100 controls with moderate usage, the costs should be minimal and likely within the AWS free tier limits. However, costs can increase if usage scales up significantly, especially in terms of CloudWatch log data ingestion and retention.

By following these steps, you can set up the Lambda function and Cloud Custodian policy correctly while keeping an eye on the associated costs.